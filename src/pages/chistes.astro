---
import CardChistes from "../components/CardChistes.astro";
import Layout from "../components/Layout.astro";
// por defecto astro asigna un async cuando el codigo esta dentro de los --- ---
const response = await fetch("https://jsonplaceholder.typicode.com/users");
const users = await response.json();

const arrayChistes = [
    {
        urlChiste:
            "./imagenes/chistes/amor-tengo-un-problema.webp"
    },
    {
        urlChiste:
            "./imagenes/chistes/a-como-las-empanadas.webp"
    },
    {
        urlChiste:
            "./imagenes/chistes/vino-de-la-casa.webp"
    },
    {
        urlChiste:
            "./imagenes/chistes/el-papa-antes-de-morir.webp"
    },
    {
        urlChiste:
            "./imagenes/chistes/carne-frita-sudada.webp"
    },
    {
        urlChiste:
            "./imagenes/chistes/cabezon-sombrero.webp"
    },
    {
        urlChiste:
            "./imagenes/chistes/odebrecht.webp"
    },
    {
        urlChiste:
            "./imagenes/chistes/bienvenido-a-starbucks.webp"
    },
    {
        urlChiste:
            "./imagenes/chistes/me-llamo-ju-ju-juan.webp"
    },
    {
        urlChiste:
            "./imagenes/chistes/me-robaron-mi-camioneta.webp"
    },
];

const usersChistes = await users.map((usuario, i) => ({
    id: usuario.id,
    nombre: usuario.name,
    apodo: usuario.username,
    correo: usuario.email,
    chiste: arrayChistes[i].urlChiste
}));

const bgCardChiste = "bg-gradient-to-t from-transparent from-slate-60% via-gray-300 via-80% to-[#afacba] to-100% border-gray-500 md:border-b-[3px] md:border-r-[3px] shadow-slate-800 dark:from-[#19202b]  dark:via-gray-700 dark:to-gray-700"
---

<Layout style="">
    <section class="w-auto h-auto">
        <div class={` w-[98%] h-auto m-auto md:px-10 text-center mb-10 p-1 shadow-md lg:shadow-lg rounded-3xl`}>
            <h1 class="font-bold text-xl lg:text-3xl mb-3" style={"view-transition-name: proyectoChiste"}>Dejame contarte un chiste, <br>o mejor 10</h1>
            <p class="  mb-6 font-semibold">Primero que todo muchas gracias por ver mi trabajo,para poder contarte estos chistes fue necesario tener las siguentes habilidades que voy a resumir a continuación
            </p>

            <div class="md:text-start lg:text-center my-2">
                <p>- Conocimientos en POO y manejo de componentes</p>
                <p>- Uso del método fetch() para consumir una API "https://jsonplaceholder.typicode.com/users"</p>
                <p>- Conocimientos en JavaScript, TypeScript, Tailwind, Node.js y Astro</p>
                <p>- Creación de arrays uniendo dos arreglos, haciendo uso del método map()</p>
                <p>- Manejo de props y buenas prácticas, para evitar la duplicidad de código </p>
            </div>
    
        </div>

        <div class="mb-10 grid md:grid-cols-2 lg:grid-cols-4 gap-8 rounded-3xl @apply lg:bg-[url('./imagenes/map-colombia.webp')] bg-[center_center] bg-no-repeat bg-contain">

        {
            usersChistes.map((usuario) => (
                <CardChistes
                    id={usuario.id}
                    nombre={usuario.nombre}
                    apodo={usuario.apodo}
                    correo={usuario.correo}
                    chiste={usuario.chiste}
                />
            ))
        }
        </div>
    </section>
</Layout>
