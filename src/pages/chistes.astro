---
import CardChistes from "../components/[CardChistes].astro";
import Layout from "../components/[Layout].astro";
// por defecto astro asigna un async cuando el codigo esta dentro de los --- ---
const response = await fetch("https://jsonplaceholder.typicode.com/users");
const users = await response.json();

const arrayChistes = [
    {
        urlChiste:
            "./imagenes/chistes/amor-tengo-un-problema.webp"
    },
    {
        urlChiste:
            "./imagenes/chistes/a-como-las-empanadas.webp"
    },
    {
        urlChiste:
            "./imagenes/chistes/vino-de-la-casa.webp"
    },
    {
        urlChiste:
            "./imagenes/chistes/el-papa-antes-de-morir.webp"
    },
    {
        urlChiste:
            "./imagenes/chistes/carne-frita-sudada.webp"
    },
    {
        urlChiste:
            "./imagenes/chistes/cabezon-sombrero.webp"
    },
    {
        urlChiste:
            "./imagenes/chistes/odebrecht.webp"
    },
    {
        urlChiste:
            "./imagenes/chistes/bienvenido-a-starbucks.webp"
    },
    {
        urlChiste:
            "./imagenes/chistes/me-llamo-ju-ju-juan.webp"
    },
    {
        urlChiste:
            "./imagenes/chistes/me-robaron-mi-camioneta.webp"
    },
];

const usersChistes = await users.map((usuario, i) => ({
    id: usuario.id,
    nombre: usuario.name,
    apodo: usuario.username,
    correo: usuario.email,
    chiste: arrayChistes[i].urlChiste
}));


---

<Layout style="bg-gray-200 text-[#1F1D2B]" title="10 chistes" icon="risa.svg">
    <section>
        <section class="bg-gradient-to-t from-white from-slate-60% via-gray-300 via-80% to-[#afacba] to-100% border-gray-500 border-b-[3px] border-r-[3px] shadow-slate-800    shadow-xl  m-20 rounded-3xl mt-10  pb-10">
            <h1 class="font-bold w-full text-center h-40 text-5xl p-8 ">Dejame contarte un chiste o mejor 10</h1>
            <p class=" text-start w-auto h-64 text-2xl px-40"><strong>Primero que todo muchas gracias por ver mi trabajo, </strong> para poder contarte estos chistes fue necesario tener las siguentes habilidades que voy a resumir a continuación<br>
                <br>- Conocimientos en <b>POO</b> y manejo de componentes
                <br>- Uso del método fetch() para consumir una <b>API</b> "https://jsonplaceholder.typicode.com/users"
                <br>- Conocimientos en <b>JavaScript, TypeScript, Tailwind, Node.js y Astro</b>
                <br>- Creación de arrays uniendo dos arreglos, haciendo uso del método map() 
                <br>- Manejo de props y buenas prácticas, para evitar la duplicidad de código 
        </p>
    
        </section>

        <div class="bg-cover grid grid-cols-4 mb-20 px-20 items-center gap-8 text-center w-full p-16 rounded-3xl" style={ "background-image: url('/public/imagenes/map-colombia.webp'); background-position: center center; background-repeat: no-repeat; width: auto; background-size: contain;"}>

        {
            usersChistes.map((usuario) => (
                <CardChistes
                    id={usuario.id}
                    nombre={usuario.nombre}
                    apodo={usuario.apodo}
                    correo={usuario.correo}
                    chiste={usuario.chiste}
                />
            ))
        }
        </div>
    </section>
</Layout>
